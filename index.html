<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è –±–ª—é–¥–∞</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        .form-group {
            margin-bottom: 15px;
        }
        input, button {
            padding: 10px;
            font-size: 14px;
        }
        button {
            cursor: pointer;
            background-color: #4CAF50;
            color: white;
            border: none;
        }
        .recommendations-section {
    margin-top: 15px;
    padding-top: 15px;
    border-top: 1px dashed #e1e5e9;
}

.recommendations-title {
    font-weight: 600;
    color: #2c3e50;
    margin-bottom: 8px;
    font-size: 14px;
}

.recommendations-list {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
}

.recommendation-item {
    background: linear-gradient(135deg, #4CAF50, #45a049);
    color: white;
    padding: 6px 12px;
    border-radius: 15px;
    font-size: 12px;
    font-weight: 500;
    box-shadow: 0 2px 5px rgba(76, 175, 80, 0.2);
}
    </style>
</head>
<body>

    <h1>–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è –±–ª—é–¥–∞</h1>
    <form id="preferencesForm">
        <div class="form-group">
            <label for="calories">–ö–∞–ª–æ—Ä–∏–∏ (–æ—Ç - –¥–æ):</label>
            <input type="text" id="calories" placeholder="–ü—Ä–∏–º–µ—Ä: 400-500">
        </div>
        <div class="form-group">
            <label for="proteins">–ë–µ–ª–∫–∏ (–≥):</label>
            <input type="text" id="proteins" placeholder="–ü—Ä–∏–º–µ—Ä: 20-30">
        </div>
        <div class="form-group">
            <label for="fats">–ñ–∏—Ä—ã (–≥):</label>
            <input type="text" id="fats" placeholder="–ü—Ä–∏–º–µ—Ä: 10-15">
        </div>
        <div class="form-group">
            <label for="carbs">–£–≥–ª–µ–≤–æ–¥—ã (–≥):</label>
            <input type="text" id="carbs" placeholder="–ü—Ä–∏–º–µ—Ä: 40-50">
        </div>
        <button type="submit">–ü–æ–ª—É—á–∏—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏</button>
    </form>

    <h2>–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–æ–µ –±–ª—é–¥–æ:</h2>
    <p id="result"></p>

    <script>
        addBotMessage(data) {
    const dish = data.dish;
    const reason = data.reason;
    const recommendations = data.recommendations || [];

    // –°–æ–∑–¥–∞–µ–º HTML –¥–ª—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
    let recommendationsHTML = '';
    if (recommendations && recommendations.length > 0) {
        recommendationsHTML = `
            <div class="recommendations-section">
                <div class="recommendations-title">üçΩÔ∏è –° —ç—Ç–∏–º –æ–±—ã—á–Ω–æ –±–µ—Ä—É—Ç:</div>
                <div class="recommendations-list">
                    ${recommendations.map(rec => 
                        `<span class="recommendation-item">${rec}</span>`
                    ).join('')}
                </div>
            </div>
        `;
    }

    let messageHTML = `
        <strong>üçΩÔ∏è –†–µ–∫–æ–º–µ–Ω–¥—É—é: ${dish.name}</strong><br><br>
        ${reason}<br><br>

        <div class="dish-card">
            <div class="dish-image-container">
                <img src="${dish.image_url}" alt="${dish.name}" class="dish-image" 
                     onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
                <div class="dish-icon" style="display:none;">üçΩÔ∏è</div>
            </div>
            
            <div class="dish-name">${dish.name}</div>
            <div class="dish-meta">
                <strong>–ö–∞—Ç–µ–≥–æ—Ä–∏—è:</strong> ${dish.category} | 
                <strong>–¢–∏–ø:</strong> ${dish.diet}
            </div>
            
            <div class="macros">
                <div class="macro-item">
                    <div>üî• –ö–∞–ª–æ—Ä–∏–∏</div>
                    <div class="macro-value">${dish.calories} –∫–∫–∞–ª</div>
                </div>
                <div class="macro-item">
                    <div>üí™ –ë–µ–ª–∫–∏</div>
                    <div class="macro-value">${dish.proteins} –≥</div>
                </div>
                <div class="macro-item">
                    <div>ü•ë –ñ–∏—Ä—ã</div>
                    <div class="macro-value">${dish.fats} –≥</div>
                </div>
                <div class="macro-item">
                    <div>üåæ –£–≥–ª–µ–≤–æ–¥—ã</div>
                    <div class="macro-value">${dish.carbs} –≥</div>
                </div>
            </div>
            
            <div class="tags">
                ${dish.tags.split(',').map(tag => 
                    `<span class="tag">${tag.trim()}</span>`
                ).join('')}
            </div>

            ${recommendationsHTML}
        </div>
    `;

    this.addMessage(messageHTML, 'bot');
}
    </script>

</body>
</html>
